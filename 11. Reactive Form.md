## Reactive Form

### `FormGroup`、`FormControl`

使用 Template-Driven Form 是將驗證的部分寫在 template 中，而 Reactive Form 把驗證的地方寫在 TypeScript 中，來看看需要更改的檔案 :

```
|--app
    |--app.component.html // 更動
    |--app.component.ts // 更動
```

``` html
<div class="container">
  <div class="row">
    <div class="col-xs-12 col-sm-10 col-md-8 col-sm-offset-1 col-md-offset-2">
      <form [formGroup]="signupForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
          <label for="username">Username</label>
          <input
            type="text"
            id="username"
            class="form-control"
            formControlName="username">
        </div>
        <div class="form-group">
          <label for="email">email</label>
          <input
            type="text"
            id="email"
            class="form-control"
            formControlName="email">
        </div>
        <div class="radio" *ngFor="let gender of genders">
          <label>
            <input
              type="radio"
              [value]="gender"
              formControlName="gender">{{ gender }}
          </label>
        </div>
        <button class="btn btn-primary" type="submit">Submit</button>
      </form>
    </div>
  </div>
</div>
```

``` TypeScript
export class AppComponent implements OnInit{
  genders = ['male', 'female'];
  signupForm: FormGroup;

  ngOnInit(): void {
    this.signupForm = new FormGroup({
      username: new FormControl(),
      email: new FormControl(),
      gender: new FormControl()
    });
  }

  onSubmit() {
    console.log(this.signupForm)
  }
}
```

在 TypeScript 的部分，class 內部宣告型別為 `FormGroup` 的物件並在 `ngOnInit` 中初始化它，`FormGroup` 建構子的參數是放入物件，物件的 key 會對應到 template 的設定 ( `<input>` 中的 `formControlName` )，物件的 value 則是 `FormControl` 物件 ( 建構子可以寫入驗證的方式，目前先留空及可 )。再來回到 template 的部分，在 `<form>` 上面綁定了 Property Binding 到 TypeScript 中的 `FormGroup` 物件，而內部想要驗證的 `<input>` 也綁定了 `formControlName`，這樣就完成了 TypeScript 與 template 的交互綁定。按下按鈕觸發 `ngSubmit(..)` 後直接操作 `FormGroup` 物件就好，此時在開發人員工具應該可以看到 `FormGroup` 的內容，以及可以發現各個 `<input>` 也具有前面所說的三種 class。